---
title: "Central Limit Theory and the Exponential Distribution"
author: "Andrew Crisp"
date: "November 13, 2015"
output: html_document
---

# Overview
Through a simulation, the Central Limit Theory will be demonstrated.  The mean and variance of the exponential distribution will be simulated and compared to calculated values.

# Simulations
During the simulation, lambda will be set to a controlled 0.2.  

```{r}
require(ggplot2)
lambda <- 0.2
nosims <- 1000
n <- 40
rexpValues <- NULL
means <- NULL
for (i in 1:nosims) rexpValues <- rbind(rexpValues,rexp(n = n, rate = lambda))
for (i in 1:nosims) means <- rbind(means, mean(rexpValues[i,]))
means <- as.numeric(means)
```

# Sample mean versus Theoretical mean
The mean of an exponential distribution is 1/lambda.  This theoretical mean can be calculated easily and compared with the actual collected sample mean.  

```{r}
calcMean <- 1/lambda
simMean <- mean(rexpValues)
CLTMean <- mean(means)
```

The calculated mean is `r calcMean`.

The Central Limit Theory says that the mean of the a sample should approximate the mean of the population.  The mean of all 1000 means simulated is `r CLTMean`.

The actual mean of all the simulated values is `r simMean`.

```{r}
#hist40Mean <- hist(means)
#fit <- seq(min(means),max(means))
#yfit <- dnorm(xfit, mean=mean(means), sd = sd(means))
#yfit <- yfit * diff(hist40Mean$mids[1:2]*length(means))
#plot(hist40Mean)
#lines(xfit,yfit)
#abline(v=mean(means), lwd=2)
ggplot() +
  aes(means) + 
  geom_histogram(aes(y = ..density..), binwidth=.25, alpha=.2) + 
  # geom_density(color="blue") + 
  geom_vline(xintercept=mean(means)) +
  stat_function(geom="line", fun=dnorm, arg=list(mean=mean(means),sd=sd(means)))

```

# Sample variance versus Theoretical variance
Similar to the mean, the standard deviation of an exponential distribution is 1/lambda.  The variance is the square of the standard deviation.  

```{r}
calcVariance <- (1/lambda)^2
n <- 40
n40CollectionOfVariances <- NULL
for (i in 1:nosims) n40CollectionOfVariances <- rbind(n40CollectionOfVariances, var(rexpValues[i,]))
simVariance <-mean(n40CollectionOfVariances)
```

The calculated (theoretical) variance is `r calcVariance`.

The average variance of the simulations is `r simVariance`.

```{r}
#hist40Variance <- hist(n40CollectionOfVariances)
#xfit <- seq(min(n40CollectionOfVariances),max(n40CollectionOfVariances))
#yfit <- dnorm(xfit, mean=mean(n40CollectionOfVariances), sd = sd(n40CollectionOfVariances))
#yfit <- yfit * diff(hist40Variance$mids[1:2]*length(n40CollectionOfVariances))
#plot(hist40Variance)
#lines(xfit,yfit)
#abline(v=mean(n40CollectionOfVariances), lwd=2)
ggplot() +
  aes(n40CollectionOfVariances) + 
  geom_histogram(aes(y = ..density..), alpha=.2) + 
  # geom_density(color="blue") + 
  geom_vline(xintercept=mean(n40CollectionOfVariances)) +
  stat_function(geom="line", fun=dnorm, arg=list(mean=mean(n40CollectionOfVariances),sd=sd(n40CollectionOfVariances)))
```

# Distribution

